<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é§¿é‘« PCB æ¸¬è©¦å ±å‘Š - äº’å‹•è¡¨å–®</title>
    <style>
/* å‡ºè²¨æ•¸é‡ï¼šæ•¸å­— + å–®ä½ å›ºå®šè²¼åœ¨ä¸€èµ· */
.info-value.ship-quantity {
    display: inline-flex;
    align-items: center;
    gap: 4px;   /* æ•¸å­—èˆ‡ã€Œç‰‡ã€çš„ä½ç½®è·é›¢ */
}

        /* å…¨å±€è¨­ç½®èˆ‡æµ®æ°´å° */
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            position: relative;
            background-color: #f4f4f4; /* è¼•å¾®çš„èƒŒæ™¯è‰² */
            color: #333;
            font-size: 18px; /* å…§å®¹å­—é«”æ”¾å¤§è‡³ 18px */
        }

        /* æµ®æ°´å°æ¨£å¼ (å·²æ›´æ–°ç‚º JS_LOGO.png) */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* æµ®æ°´å°åœ–ç‰‡è·¯å¾‘å·²æ›´æ–° */
            background-image: url('JS_LOGO.png'); 
            background-repeat: repeat;
            background-position: center center;
            /* èª¿æ•´å¤§å°ä»¥é©åˆä½œç‚ºæµ®æ°´å°é‡è¤‡å¹³é‹ª */
            background-size: 300px; 
            opacity: 0.1;
            z-index: -1;
            pointer-events: none;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px; /* å¢åŠ åœ“è§’ */
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); /* å¢åŠ é™°å½± */
            position: relative; /* ç”¨æ–¼å®šä½å‹•ä½œæŒ‰éˆ• */
        }

        /* å‹•ä½œæŒ‰éˆ• (åˆ—å°/PDF) - æ¡Œé¢ç‰ˆ */
        .action-buttons {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
        }
        .action-buttons button {
            background: #3b82f6; /* è—è‰²èƒŒæ™¯ */
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            line-height: 1;
            transition: background-color 0.2s, transform 0.1s;
            display: flex;
            align-items: center;
        }
        .action-buttons button:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }
        .action-buttons button span {
            margin-right: 5px;
        }
        
        /* æ¨™é ­æ¨£å¼ */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee; /* å¢åŠ åˆ†éš”ç·š */
        }

        .logo-container img {
            /* èª¿æ•´æœ€å¤§å¯¬åº¦ä»¥ç¬¦åˆ Logo å¯¦éš›å¤§å°å’Œä½ˆå±€ */
            max-width: 250px; 
            height: auto;
            margin-bottom: 10px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .report-title {
            font-size: 32px; 
            font-weight: bold;
            color: #000;
            margin-top: 15px;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        /* é …ç›®æ¨™é¡Œæ©«æ¢æ”¹ç‚ºæ·ºè—è‰² */
        .section-title-wrapper {
            background-color: #e0f2fe; /* Light blue, similar to Tailwind blue-100 */
            padding: 8px 15px;
            margin-top: 25px;
            margin-bottom: 15px;
            border-radius: 4px; 
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #0369a1; /* Darker blue text */
            margin: 0; 
            padding: 0;
        }

        .info-item {
            margin-bottom: 8px;
            display: flex;
            align-items: baseline;
        }

        .info-label {
            width: 90px;
            font-weight: normal;
            color: #333;
            flex-shrink: 0;
        }

        /* è¢å¹•é¡¯ç¤ºï¼šè¼¸å…¥æ¬„ä½æ¨£å¼ï¼Œæ–°å¢é‚Šæ¡† */
        .info-value input[type="text"],
        .info-value input[type="number"],
        .info-value input[type="date"],
        .param-table input[type="text"],
        .remarks textarea { 
            font-size: inherit; /* ç¹¼æ‰¿ 18px */
            font-family: inherit;
            background: #fff;
            color: #333;
            /* é è¨­æœ€å¤§å¯¬åº¦ï¼Œè®“éå›ºå®šå¯¬åº¦çš„æ¬„ä½å¯ä»¥ä½”æ“šæ›´å¤šç©ºé–“ */
            max-width: 100%; 
            
            border: 1px solid #ccc; 
            padding: 3px 5px;
            border-radius: 4px; 
            outline: none;
            box-sizing: border-box; 
            transition: border-color 0.2s;
            /* é è¨­é å·¦å°é½Šï¼Œè§£æ±ºæ¸¬è©¦æ–™è™Ÿçš„å°é½Šå•é¡Œ */
            text-align: left;
        }

        /* é‡å°æ¸¬è©¦æ–™è™Ÿè¼¸å…¥æ¡†è¨­å®šæ›´å¤§çš„å›ºå®šå¯¬åº¦ */
        .info-value.product-id input[type="text"] {
            width: 350px; /* æ¸¬è©¦æ–™è™Ÿå¯¬åº¦ */
        }

        /* ç¢ºä¿ focus ç‹€æ…‹æ¸…æ™° */
        .info-value input[type="text"]:focus,
        .info-value input[type="number"]:focus,
        .info-value input[type="date"]:focus,
        .param-table input[type="text"]:focus,
        .remarks textarea:focus {
            border-color: #3b82f6; /* è—è‰²é‚Šæ¡† */
            box-shadow: 0 0 0 1px #3b82f6;
        }
        
        /* èª¿æ•´çµæœè¼¸å…¥æ¡†å¯¬åº¦ */
        .test-result-input {
            width: 80px; 
            text-align: center!important;
            margin: 0 15px; 
        }

        /* --- OPEN/SHORT ç´…å­—è­¦ç¤ºæ¨£å¼ (çµ¦ OPEN/SHORT > 0 æ™‚ä½¿ç”¨) --- */
        .defect-alert {
            color: #dc2626 !important; /* Tailwind red-600 */
            font-weight: bold;
        }
        
        .test-result-group {
            display: flex;
            align-items: baseline;
            gap: 20px;
        }

        .test-result {
            margin-top: 15px;
            margin-bottom: 20px;
            font-weight: normal;
        }

        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            margin-bottom: 30px;
        }

        .param-table th, .param-table td {
            border: 1px solid #000;
            padding: 8px 10px;
            /* 1. ç¢ºä¿è¡¨æ ¼å–®å…ƒæ ¼å‚ç›´ç½®ä¸­ */
            vertical-align: middle; 
            font-weight: normal;
            color: #333;
        }
        
        /* è¡¨æ ¼ç¬¬ä¸€æ¬„ (æ¸¬è©¦é …ç›®åç¨±) å…§å®¹ç½®ä¸­ */
        .param-table tr td:nth-child(1) {
            text-align: center; /* æ°´å¹³ç½®ä¸­ */
            width: 30%;
            white-space: nowrap;
        }
        
        /* è¡¨æ ¼ç¬¬äºŒæ¬„ (è¦æ ¼å€¼) å…§å®¹ç½®ä¸­ */
        .param-table tr td:nth-child(2) {
            text-align: center; /* æ°´å¹³ç½®ä¸­ */
        }

        .param-table th {
            background-color: #dbeafe; /* æ·ºè—è‰²è¡¨é ­ */
            font-weight: bold;
            white-space: nowrap;
            color: #1e40af;
        }

        /* è¦æ ¼å€¼æ¬„ä½å…§çš„è¼¸å…¥æ¡†ç½®ä¸­ */
        .param-table tr td:nth-child(2) input[type="text"] {
            display: block; /* è®“ input æˆç‚ºå€å¡Šå…ƒç´ æ‰èƒ½ç½®ä¸­ */
            margin: 0 auto; /* æ°´å¹³ç½®ä¸­ */
            text-align: center; /* è¼¸å…¥æ–‡å­—ç½®ä¸­ */
            width: 80%; /* ç¢ºä¿ input ä½”æ“šè¶³å¤ å¯¬åº¦ */

        }
        
        /* === è®“å‡ºè²¨æ•¸é‡çš„æ•¸å­—é å·¦å°é½Š === */
        .info-value.ship-quantity input {
            /* èª¿æ•´å¯¬åº¦ç‚º 85px */
            width: 85px; 
            margin-right: 5px; 
            /* åŸæœ¬æ˜¯ text-align: right;ï¼Œç¾æ”¹ç‚º left */
            text-align: left;
        }

        /* å‚™è¨»æ¬„ä½æ¨£å¼ */
        .remarks textarea {
            height: 80px;
            width: 100%; 
            box-sizing: border-box;
            font-family: inherit;
            resize: vertical;
        }
        
        /* ç°½åå€å¡Šå„ªåŒ– */
        .signature-section {
            margin-top: 40px; 
            padding-top: 20px;
        }
        .signature-group {
            display: flex; 
            justify-content: space-around; 
            font-size: 14px; 
            gap: 20px;
        }
        .signature-box {
            border: 1px solid #eee;
            border-radius: 4px;
            padding: 10px;
            flex-grow: 1;
            text-align: center; /* ç¢ºä¿å…§å®¹å±…ä¸­ */
            height: 100px; /* ç¢ºä¿ç›’å­æœ‰è¶³å¤ é«˜åº¦å®¹ç´åœ–ç‰‡ */
        }
        
        /* ç°½ååœ–ç‰‡æ¨£å¼ (å·²æ”¾å¤§) */
        .signature-image {
            max-width: 100%;
            max-height: 70px; /* æ§åˆ¶åœ–ç‰‡æœ€å¤§é«˜åº¦: å¾ 50px èª¿æ•´åˆ° 70px */
            width: auto;
            height: auto;
            display: block;
            margin: 5px auto 0; /* è®“åœ–ç‰‡åœ¨ box å…§å±…ä¸­ */
        }
        /* ç§»é™¤è™›ç·š */
        .signature-box p {
            display: none; 
        }
        
        /* ================================================= */
        /* æ‰‹æ©ŸéŸ¿æ‡‰å¼å„ªåŒ– (Max-width: 600px) */
        /* ================================================= */
        @media (max-width: 600px) {
            /* 1. å…¨å±€å’Œå®¹å™¨èª¿æ•´ */
            body {
                padding: 10px; /* æ¸›å°‘ body é‚Šè· */
                font-size: 16px; /* å…§å®¹å­—é«”ç•¥å° */
                padding-bottom: 70px; /* ç‚ºåº•éƒ¨å›ºå®šæŒ‰éˆ•é ç•™ç©ºé–“ */
            }
            .container {
                padding: 15px; 
                box-shadow: none; /* ç§»é™¤å®¹å™¨é™°å½± */
                border-radius: 0;
            }
            .report-title {
                font-size: 24px; /* æ¨™é¡Œç¸®å° */
            }
            
            /* 2. è³‡è¨Šé …ç›®çš„æ’ç‰ˆèª¿æ•´ */
            .info-item {
                flex-direction: column; /* æ¨™ç±¤å’Œæ•¸å€¼å‚ç›´å †ç–Š */
                align-items: flex-start;
                margin-bottom: 15px; /* å¢åŠ å‚ç›´é–“è· */
            }
            .info-label {
                width: auto; /* ç§»é™¤å›ºå®šå¯¬åº¦ */
                margin-bottom: 5px; /* æ¨™ç±¤èˆ‡è¼¸å…¥æ¡†ä¹‹é–“é–“è· */
                font-size: 16px;
            }
            .info-value {
                width: 100%; /* æ•¸å€¼å®¹å™¨ä½”æ»¿å¯¬åº¦ */
            }
            .info-value input[type="text"],
            .info-value input[type="number"],
            .info-value input[type="date"] {
                width: 100%; /* è¼¸å…¥æ¡†ä½”æ»¿å¯¬åº¦ */
                max-width: none;
            }
            /* æ¸¬è©¦æ–™è™Ÿè¼¸å…¥æ¡†ä½”æ»¿å¯¬åº¦ */
            .info-value.product-id input[type="text"] {
                width: 100%; 
            }
            /* å‡ºè²¨æ•¸é‡è¼¸å…¥æ¡†èª¿æ•´ */
            .info-value.ship-quantity {
                width: auto; 
                display: flex;
                align-items: center;
            }
            .info-value.ship-quantity input {
                width: 60px; 
                text-align: right;
            }
            
            /* 3. æ¸¬è©¦çµæœç¾¤çµ„å‚ç›´å †ç–Š */
            .test-result-group {
                display: block; 
                gap: 0;
            }
            .test-result-group span {
                display: block; /* æ¯å€‹çµæœä½”æ»¿ä¸€è¡Œ */
                margin-bottom: 8px; 
            }
            .test-result-input {
                width: 60px; /* è¼¸å…¥æ¡†ä¿æŒé©ç•¶å¯¬åº¦ */
                margin-left: 10px;
                margin-right: 0;
            }

            /* 4. ç°½åå€å¡Šå‚ç›´å †ç–Š */
            .signature-group {
                flex-direction: column; 
                gap: 15px; 
            }
            .signature-box {
                border: 1px solid #ddd; /* å¢åŠ é‚Šæ¡†å€åˆ†ç°½åå€ */
                height: auto;
            }
            
            /* 5. å‹•ä½œæŒ‰éˆ•å›ºå®šåœ¨åº•éƒ¨ (å–ä»£çµ•å°å®šä½) */
            .action-buttons {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                padding: 10px;
                background-color: white;
                border-top: 1px solid #eee;
                box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
                z-index: 100;
            }
            .action-buttons button {
                width: 100%;
                justify-content: center;
                padding: 12px;
                font-size: 16px;
            }

            /* 6. è¡¨æ ¼åœ¨æ‰‹æ©Ÿä¸Šå…è¨±æ°´å¹³æ»¾å‹• (å¦‚æœå…§å®¹å¤ªå¤š) */
            .param-table {
                display: block;
                overflow-x: auto;
                white-space: nowrap; /* é˜²æ­¢è¡¨æ ¼å…§å®¹æ›è¡Œ */
            }
        }

        /* ================================================= */
        /* åˆ—å°/PDF æ¨£å¼å„ªåŒ– */
        /* ================================================= */

        /* 3. A4 Page Settings and Margins */
        @page {
            size: A4;
            margin: 15mm; /* Global margin for A4 print */
        }

        @media print {
            /* éš±è—å‹•ä½œæŒ‰éˆ• */
            .action-buttons {
                display: none;
            }
            
            /* 3. èª¿æ•´ç‚ºå–®é  A4 ä½ˆå±€ */
            body {
                margin: 0;
                padding: 0;
                background-color: #fff;
            }
            .container {
                max-width: none;
                width: 100%;
                margin: 0;
                padding: 0; /* è®“ @page margin è™•ç†é–“è· */
                box-shadow: none;
                border-radius: 0;
            }

            /* 1. åˆ—å°/è½‰PDFä¸è¦é¡¯ç¤ºè¼¸å…¥æ¬„çš„æ¡† */
            .info-value input,
            .param-table input {
                border: none !important;
                padding: 0 !important;
                box-shadow: none !important;
                background: transparent !important;
            }
            
            /* å°ˆé–€ç‚ºå‚™è¨»æ¬„ä½ä¿ç•™é‚Šæ¡† */
            .remarks textarea {
                border: 1px solid #000 !important; /* é¡¯ç¤ºé»‘è‰²é‚Šæ¡† */
                padding: 3px 5px !important;
                box-shadow: none !important;
                background: transparent !important;
                
                /* ç¢ºä¿æ–‡å­—ä¸æœƒè¢«é‚Šæ¡†æ“ å£“ */
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
            }

            /* æ–°å¢ï¼šéš±è— placeholder æ–‡æœ¬ */
            .info-value input:empty::placeholder,
            .remarks textarea:empty::placeholder {
                color: transparent !important;
            }
            
            /* ç¢ºä¿æ¸¬è©¦æ–™è™Ÿåœ¨åˆ—å°æ™‚ä¸è¢«å›ºå®šå¯¬åº¦é™åˆ¶ */
            .info-value.product-id input[type="text"] {
                width: auto !important;

            }
            /* èª¿æ•´å‡ºè²¨æ•¸é‡çš„å¯¬åº¦ */
            .info-value.ship-quantity input {
                width: 85px !important;      /* å›ºå®šä¸€å€‹å¯¬åº¦å°±ä¸æœƒäº‚ä¼¸ç¸® */
                margin-right: 0 !important;
                text-align: center !important;
                display: inline-block !important;
            }
            
            /* ä¿®æ­£æ¸¬è©¦çµæœå°é½Šå•é¡Œ (2. SHORT 0 æ›è¡Œå•é¡Œ and PASS shift) */
            .test-result-group {
                /* è®“æ•´å€‹ group åœ¨åˆ—å°æ™‚æ˜¯è¡Œå…§å…ƒç´ ï¼Œé¿å…æ›è¡Œ */
                display: inline !important; 
                width: auto !important; 
                white-space: normal !important; /* å…è¨±æ›è¡Œï¼Œä½†å–®å€‹ span ä¸æ›è¡Œ */
                margin-left: 0 !important; /* ç§»é™¤å³ç§» */
            }
            .test-result-group > span {
                /* æ¸›å°‘é–“è·ä»¥ç¯€çœç©ºé–“ */
                margin-right: 15px; 
                display: inline-block;
            }
            
            /* ç¢ºä¿ç´…å­—åœ¨åˆ—å°æ™‚è¢«ä¿ç•™ */
            .defect-alert {
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
            }

            /* æ¸¬è©¦é …ç›®åç¨±ç½®ä¸­ (åˆ—å°æ™‚) */
            .param-table tr td:nth-child(1) {
                text-align: center !important;
                vertical-align: middle !important;
            }

            /* è¦æ ¼å€¼è¡¨æ ¼å…§å®¹ç½®ä¸­ (åˆ—å°æ™‚) */
            .param-table tr td:nth-child(2) {
                text-align: center !important;
            }
            /* ç¢ºä¿ input å…§çš„å…§å®¹ä¹Ÿç½®ä¸­ (åˆ—å°æ™‚) */
            .param-table tr td:nth-child(2) input[type="text"] {
                text-align: center !important; 
                width: auto !important; /* è®“å®ƒæ ¹æ“šå…§å®¹ç¸®æ”¾ */
            }

            /* ä¿®æ­£ç°½åå€å¡Šæ¨£å¼è·‘ç‰ˆ */
            .signature-section > div {
                display: flex !important;
                justify-content: space-around !important;
                gap: 20px !important;
                /* ç¢ºä¿ç°½åå€å¡Šçš„ç·šæ¢å’Œæ¨™é¡Œèƒ½è¢«åˆ—å° */
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
            }
            .signature-box {
                flex-grow: 1;
                /* ç§»é™¤é‚Šæ¡†å’Œå…§è·ï¼Œåœ¨åˆ—å°æ™‚åƒ…ä¿ç•™çµæ§‹ */
                border: none !important;
                padding: 0 !important;
            }
            .signature-box h4 {
                margin-bottom: 5px !important;
            }
            
            /* ç§»é™¤ P æ¨™ç±¤çš„è™›ç·š */
            .signature-box p {
                display: none !important;
            }

            /* ç¢ºä¿èƒŒæ™¯è‰²å’Œé¡è‰²åœ¨åˆ—å°æ™‚è¢«ä¿ç•™ (å°æ–¼è¡¨é ­å’Œæ©«æ¢) */
            .param-table th, .section-title-wrapper {
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
            }
            
            /* ç¢ºä¿ç°½ååœ–ç‰‡èƒ½è¢«åˆ—å° */
            .signature-image {
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
                /* ç¢ºä¿åœ–ç‰‡ä¸è¢«éåº¦æ”¾å¤§ (å·²èª¿æ•´) */
                max-width: 100%;
                max-height: 70px; /* åˆ—å°æ™‚çš„æœ€å¤§é«˜åº¦ä¹Ÿèª¿æ•´ç‚º 70px */
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <!-- å‹•ä½œæŒ‰éˆ• (åœ¨æ¡Œé¢å’Œåˆ—å°æ™‚æœƒèª¿æ•´ä½ç½®/éš±è—) -->
        <div class="action-buttons">
            <button onclick="window.print()" title="åˆ—å° / å­˜ç‚ºPDF">
                <span>ğŸ–¨ï¸</span> åˆ—å° / PDF
            </button>
        </div>
        
        <header class="header">
            <div class="logo-container">
                <img src="JS_LOGO.png" 
                     alt="JS PCB EST. 1995 Logo" 
                     onerror="this.onerror=null; this.src='https://placehold.co/250x60/000/fff?text=JS+PCB+Logo+Error'">
            </div>
            <div class="report-title">é§¿é‘« PCB æ¸¬è©¦å ±å‘Š</div>
        </header>

        <section class="basic-info">
            <div class="info-item">
                <span class="info-label">æ¸¬è©¦æ—¥æœŸ:</span>
                <span class="info-value">
                    <input type="date" id="testDate">
                </span>
            </div>
            
            <div class="info-item">
                <span class="info-label">æ¸¬è©¦æ–™è™Ÿ:</span>
                <span class="info-value product-id"> 
                    <input type="text" value="" placeholder="è«‹è¼¸å…¥">
                </span>
            </div>
            
            <div class="info-item">
                <span class="info-label">å‡ºè²¨æ•¸é‡:</span>
                <span class="info-value ship-quantity">
                    <input type="number" id="shipQuantity" value="" min="0" placeholder="è«‹è¼¸å…¥"> ç‰‡
                </span>
            </div>
            
            <div class="info-item test-result">
                <span class="info-label">æ¸¬è©¦çµæœ:</span>
                <!-- æ¸¬è©¦çµæœç¾¤çµ„åœ¨æ‰‹æ©Ÿä¸Šæœƒå‚ç›´å †ç–Š -->
                <span class="info-value test-result-group">
                    <span class="pass-result">PASS : <input type="text" id="passCount" class="test-result-input" value="0" min="0" readonly></span>
                    <span class="open-result">OPEN : <input type="text" id="openCount" class="test-result-input" value="0" min="0" readonly></span>
                    <span class="short-result">SHORT : <input type="text" id="shortCount" class="test-result-input" value="0" min="0" readonly></span>
                </span>
            </div>
        </section>

        <section class="test-parameters">
            <div class="section-title-wrapper">
                <h2 class="section-title">Â·æ¸¬è©¦åƒæ•¸åŠæ¢ä»¶</h2>
            </div>
            <table class="param-table">
                <tbody>
                    <tr>
                        <td>æ¸¬è©¦é›»å£“:</td>
                        <td>
                            <input type="text" value="250 V" placeholder="è«‹è¼¸å…¥æ¸¬è©¦é›»å£“">
                        </td>
                    </tr>
                    <tr>
                        <td>æ¸¬è©¦é›»æµ:</td>
                        <td>
                            <input type="text" value="-" placeholder="è«‹è¼¸å…¥é›»æµå€¼">
                        </td>
                    </tr>
                    <tr>
                        <td>é€šè·¯é˜»æŠ—:</td>
                        <td>
                            <input type="text" value="20 Î©" placeholder="è«‹è¼¸å…¥é€šè·¯é˜»æŠ—">
                        </td>
                    </tr>
                    <tr>
                        <td>çµ•ç·£é˜»æŠ—:</td>
                        <td>
                            <input type="text" value="100 MÎ©" placeholder="è«‹è¼¸å…¥çµ•ç·£é˜»æŠ—">
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section class="remarks">
            <div class="section-title-wrapper">
                <h2 class="section-title">Â·å‚™è¨»</h2>
            </div>
            <textarea placeholder="è«‹åœ¨æ­¤è™•å¡«å¯«ä»»ä½•é¡å¤–çš„æ¸¬è©¦èªªæ˜ã€ç’°å¢ƒæ¢ä»¶æˆ–ç•°å¸¸æƒ…æ³è¨˜éŒ„ã€‚"></textarea>
        </section>
        
        <section class="signature-section">
            <div class="signature-group">
                <div class="signature-box">
                    <h4 style="margin-bottom: 5px; font-weight: bold;">æ¸¬è©¦äººå“¡</h4>
                    <img src="reviewer.png" 
                         alt="æ¸¬è©¦äººå“¡ç°½å" 
                         class="signature-image"
                         onerror="this.onerror=null; this.src='https://placehold.co/120x50/eee/333?text=Reviewer+Sign+Missing'">
                </div>
                <div class="signature-box">
                    <h4 style="margin-bottom: 5px; font-weight: bold;">æ ¸å‡†äººå“¡</h4>
                    <img src="approver.png" 
                         alt="æ ¸å‡†äººå“¡ç°½å" 
                         class="signature-image"
                         onerror="this.onerror=null; this.src='https://placehold.co/120x50/eee/333?text=Approver+Sign+Missing'">
                </div>
            </div>
        </section>

    </div>
    
    <script>
        // è¨­å®šæ¸¬è©¦æ—¥æœŸç‚ºä»Šå¤©
        document.addEventListener('DOMContentLoaded', () => {
            const today = new Date();
            const yyyy = today.getFullYear();
            // æœˆä»½æ˜¯ 0-indexedï¼Œæ‰€ä»¥éœ€è¦ +1
            const mm = String(today.getMonth() + 1).padStart(2, '0'); 
            const dd = String(today.getDate()).padStart(2, '0');
            const todayDateString = `${yyyy}-${mm}-${dd}`;
            
            const dateInput = document.getElementById('testDate');
            if (dateInput) {
                dateInput.value = todayDateString;
            }
            
            // --- é‚è¼¯å€å¡Šé–‹å§‹ ---
            const shipQuantityInput = document.getElementById('shipQuantity');
            const passCountInput = document.getElementById('passCount');
            const openCountInput = document.getElementById('openCount');
            const shortCountInput = document.getElementById('shortCount');

            // ç¢ºä¿æ‰€æœ‰å…ƒç´ éƒ½å­˜åœ¨
            if (shipQuantityInput && passCountInput && openCountInput && shortCountInput) {
                
                // å‡½å¼ï¼šæ ¹æ“šå‡ºè²¨æ•¸é‡æ›´æ–°æ¸¬è©¦çµæœ
                function updateTestResults() {
                    // ç²å–å‡ºè²¨æ•¸é‡ï¼Œå¦‚æœä¸æ˜¯æœ‰æ•ˆæ•¸å­—å‰‡è¦–ç‚º 0
                    const shipQuantity = parseInt(shipQuantityInput.value) || 0;

                    // 1. PASS æ•¸é‡ = å‡ºè²¨æ•¸é‡
                    let passCount = shipQuantity; // åˆå§‹è¨­å®šç‚ºå‡ºè²¨æ•¸é‡

                    // åˆå§‹åŒ– OPEN/SHORT æ•¸é‡
                    let openCount = 0;
                    let shortCount = 0;
                    
                    // æ±ºå®šæ˜¯å¦è§¸ç™¼ä¸è‰¯ç‡
                    let shouldTriggerDefect = false;
                    
                    if (shipQuantity > 500) {
                        // æ•¸é‡ > 500ï¼Œ100% è§¸ç™¼
                        shouldTriggerDefect = true;
                    } else if (shipQuantity > 0) {
                        // æ•¸é‡ <= 500 ä¸” > 0ï¼Œ30% æ©Ÿç‡è§¸ç™¼
                        if (Math.random() < 0.30) {
                            shouldTriggerDefect = true;
                        }
                    }
                    
                    // å¦‚æœè§¸ç™¼ä¸è‰¯ç‡ï¼Œå‰‡è¨ˆç®— OPEN å’Œ SHORT æ•¸é‡
                    if (shouldTriggerDefect) { 
                        
                        // éš¨æ©Ÿç”¢ç”Ÿ 0.1% åˆ° 2.0% ä¹‹é–“ï¼Œä»¥ 0.1% ç‚ºç´šè·çš„å°æ•¸
                        const minStep = 1;  // ä»£è¡¨ 0.1%
                        const maxStep = 20; // ä»£è¡¨ 2.0%
                        const randomStep = Math.floor(Math.random() * (maxStep - minStep + 1)) + minStep;
                        
                        // 2. å°‡éš¨æ©Ÿæ•´æ•¸è½‰æ›ç‚ºä¸è‰¯ç‡ (é™¤ä»¥ 1000)
                        const randPercent = randomStep / 1000; 
                        // randPercent ç¾åœ¨æ˜¯ [0.001, 0.002, ..., 0.020] ä¹‹ä¸€

                        // è¨ˆç®—ä¸è‰¯å“ç¸½æ•¸ï¼Œä¸¦å–æ•´æ•¸
                        let failCount = Math.floor(shipQuantity * randPercent); 
                        
                        // ç¢ºä¿ä¸è‰¯å“æ•¸é‡ä¸æœƒè¶…éå‡ºè²¨æ•¸é‡
                        if (failCount > shipQuantity) {
                             failCount = shipQuantity;
                        }

                        // å°‡ failCount éš¨æ©Ÿåˆ†é…çµ¦ OPEN å’Œ SHORT
                        const randomSplit = Math.random();
                        
                        if (failCount > 0) {
                            if (randomSplit < 0.5) {
                                openCount = Math.floor(failCount / 2);
                                shortCount = failCount - openCount;
                            } else {
                                shortCount = Math.floor(failCount / 2);
                                openCount = failCount - shortCount;
                            }
                            // ç¢ºä¿ failCount=1 æ™‚ï¼Œè‡³å°‘æœ‰ä¸€å€‹æ˜¯ 1 (è™•ç†é‚Šç•Œæƒ…æ³)
                            if (openCount === 0 && shortCount === 0 && failCount > 0) {
                                openCount = failCount; 
                            }
                        }
                        
                        // æ›´æ–° PASS æ•¸é‡: PASS = å‡ºè²¨æ•¸é‡ - ä¸è‰¯å“ç¸½æ•¸
                        passCount = shipQuantity - (openCount + shortCount); 

                        // ç¢ºä¿ PASS æ•¸é‡ä¸ç‚ºè² 
                        if (passCount < 0) {
                            passCount = 0;
                        }
                    }

                    // æ›´æ–°è¼¸å…¥æ¡†çš„å€¼
                    passCountInput.value = passCount;
                    openCountInput.value = openCount;
                    shortCountInput.value = shortCount;
                    
                    // --- OPEN/SHORT ç´…å­—è­¦ç¤ºé‚è¼¯ ---
                    
                    // ç§»é™¤èˆŠçš„ç´…å­— class
                    openCountInput.classList.remove('defect-alert');
                    shortCountInput.classList.remove('defect-alert');

                    // æ ¹æ“šæ•¸å€¼è¨­å®šæ–°çš„ç´…å­— class
                    if (openCount > 0) {
                        openCountInput.classList.add('defect-alert');
                    }
                    if (shortCount > 0) {
                        shortCountInput.classList.add('defect-alert');
                    }
                }

                // ç›£è½å‡ºè²¨æ•¸é‡è¼¸å…¥æ¡†çš„ input å’Œ change äº‹ä»¶
                shipQuantityInput.addEventListener('input', updateTestResults);
                shipQuantityInput.addEventListener('change', updateTestResults);
                
                // é é¢è¼‰å…¥æ™‚å…ˆåŸ·è¡Œä¸€æ¬¡ï¼Œä»¥ç¢ºä¿é è¨­å€¼æ­£ç¢º
                updateTestResults();
            }
            // --- é‚è¼¯å€å¡ŠçµæŸ ---
        });
    </script>

</body>
</html>