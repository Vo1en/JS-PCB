<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JS system - è¦æ ¼ç”¢ç”Ÿå™¨</title>
  
  <link rel="stylesheet" href="report.css">
  <link rel="stylesheet" href="navbar.css"> <style>
  /* --- å¼•å…¥å­—å‹ (è¤‡è£½è‡ª index.html) --- */
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;500;700&family=Roboto:wght@300;400;700&display=swap');

  /* --- é‡‘å±¬é…è‰²è®Šæ•¸ (è¤‡è£½è‡ª index.html) --- */
  :root {
      --text-main: #1f2937;
      --gold-gradient: linear-gradient(135deg, #c2a878 0%, #e3d1a8 50%, #9e8b6b 100%);
      --gold-text-gradient: linear-gradient(to right, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
  }
    
  /* ç§»é™¤ JS PCB æµ®æ°´å°æ¨£å¼ */
  body::before { content: none !important; }

  /* é‡å°æ–°çš„å ±è¡¨çµæ§‹èª¿æ•´ä¸»è¦å®¹å™¨ */
  body {
    background-color: #f5f5f5;
    /* å·²ç§»é™¤ padding-top: 0; ä»¥ç¹¼æ‰¿ report.css ä¸­çš„ padding-top: 80px */ 
    margin: 0;
    font-family: 'Noto Sans TC', sans-serif;
  }
  
  /* è¦†å¯«èˆŠçš„ main-containerï¼Œæ¡ç”¨æ–°çš„ page-container çµæ§‹ */
  .main-container {
      width: 100%;
      margin: 0 auto;
      padding: 0;
  }
  
  /* [åŸä¿®æ”¹] éš±è—æ‰€æœ‰èˆŠçš„æ¨™é¡Œå€å¡Š */
  .logo-wrap, h1.page-title, #unified-header-container { display: none !important; } 

  /* =============== æ–°å¢ï¼šæµå‹•é‡‘å±¬é¢¨æ ¼æ¨™é¡Œ CSS (åƒè€ƒ index.html) =============== */
  
  /* é¡¯å¼æ¨™é¡Œå®¹å™¨æ¨£å¼ */
  .explicit-page-title {
      color: var(--text-main);
      margin: 0 0 35px 0; /* èª¿æ•´èˆ‡ä¸‹æ–¹è¼¸å…¥æ¡†çš„è·é›¢ */
      line-height: 1.3;
      text-align: center;
      padding-top: 15px; /* å¢åŠ é ‚éƒ¨ç©ºé–“ */
  }

  /* ç¬¬ä¸€è¡Œï¼šå“ç‰Œåç¨± (æµå‹•é‡‘å±¬å­—) */
  .explicit-page-title .brand {
      display: block;
      font-size: 2.8rem;
      font-weight: 800;
      /* é‡‘å±¬æµå…‰æ•ˆæœ (è¤‡è£½ index.html) */
      background: var(--gold-text-gradient);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
      animation: shine 5s linear infinite;
      font-family: 'Noto Sans TC', sans-serif;
  }

  /* ç¬¬äºŒè¡Œï¼šç³»çµ±åç¨± (ç²¾ç·»éœ§é¢é‡‘) */
  .explicit-page-title .system-sub {
      display: block;
      font-size: 1.2rem;
      color: #c2a878; /* éœ§é¢é‡‘ */
      font-weight: 400;
      letter-spacing: 6px;
      text-transform: uppercase;
      font-family: 'Roboto', sans-serif;
  }

  /* æ¨™é¡Œä¸‹æ–¹çš„è£é£¾ç·š (é‡‘å±¬é«®çµ²ç´‹æ„Ÿ) */
  .explicit-page-title::after {
      content: '';
      display: block;
      width: 80px;
      height: 2px;
      background: linear-gradient(90deg, transparent, #c2a878, transparent);
      margin: 20px auto 0;
      opacity: 0.8;
  }

  /* é‡‘å±¬æµå…‰å‹•ç•« (è¤‡è£½è‡ª index.html) */
  @keyframes shine {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
  }
  
  /* =============== çµæŸï¼šæµå‹•é‡‘å±¬é¢¨æ ¼æ¨™é¡Œ CSS =============== */
  
  /* èª¿æ•´ field-group æ¨£å¼ä»¥ç¬¦åˆæ–°çš„ report.css çµæ§‹ */
  .info-grid-custom {
      display: grid;
      /* ä¸€è¡Œä¸€å€‹é …ç›® */
      grid-template-columns: 1fr;
      gap: 8px; /* é …ç›®é–“è· */
      margin-bottom: 25px; 
  }

  .info-item-custom {
      display: flex;
      align-items: center;
      /* æ²¿ç”¨ report.css çš„é‚Šç·šå’Œé«˜åº¦è¨­å®š */
      border-bottom: 1px solid #ddd;
      padding-bottom: 2px;
      height: 34px; 
  }

  /* çµ±ä¸€ Label æ¨£å¼ */
  .info-item-custom .label {
      /* æ²¿ç”¨ report.css çš„ label æ¨£å¼ */
      background-color: var(--label-bg, #f0ebde);
      color: #333;
      font-weight: 700;
      font-size: 14px;
      padding: 3px 10px;
      border-radius: 4px;
      /* [ä¿®æ”¹ 1] å°‡æ¨™ç±¤å¯¬åº¦èª¿æ•´ç‚ºçµ±ä¸€çš„ 85px (åŸ 100px) */
      width: 85px; 
      text-align: center;
      margin-right: 8px;
      flex-shrink: 0;
      border: 1px solid var(--border-color, #e0d8c8);
  }
  
  /* çµ±ä¸€å…§å®¹å€çš„ input/select/div æ¨£å¼ */
  .info-content-wrap {
      flex-grow: 1;
      display: flex;
      align-items: center;
      gap: 8px;
  }

  /* [é‡è¦ä¿®æ”¹] è­¦å‘Šè¨Šæ¯çš„æ¨£å¼èª¿æ•´ï¼Œä½¿å…¶èˆ‡å…§å®¹æ•¸å€¼å‚ç›´å°é½Š */
  .warning {
      color: #ef4444; /* report.css input-error çš„ç´…è‰² */
      font-size: 13px;
      
      /* 1. æ°´å¹³å®šä½ï¼šæ¨é–‹ Label (85px) å’Œ Label/Inputé–“è· (8px) = 93px */
      margin-left: 93px; 
      
      /* 2. å‚ç›´å¾®èª¿ï¼šç¨å¾®ä¸Šæä¸€é»é»ï¼Œè®“è­¦å‘Šæ–‡å­—èˆ‡ä¸Šé¢çš„æ–‡å­—åŸºæº–ç·šå°é½Š */
      margin-top: 5px; 
      
      /* 3. æ–‡æœ¬å°é½Šï¼šæ¨¡æ“¬ input-line-custom çš„ padding-left: 8pxï¼Œè®“è­¦å‘Šæ–‡å­—èˆ‡è¼¸å…¥æ¡†å…§æ–‡å­—å°é½Š */
      padding-left: 35px; 
      
      margin-bottom: -5px; /* å¢åŠ èˆ‡ä¸‹ä¸€å€‹é …ç›®çš„é–“è· */
  }

  /* çµ±ä¸€è¡¨å–®å…ƒç´ çš„æ¨£å¼ */
  .input-line-custom {
      border: 1px solid #ccc;
      background-color: #fff;
      border-radius: 4px;
      outline: none;
      font-size: 14px;
      font-family: 'Noto Sans TC', sans-serif;
      width: 100%;
      padding: 4px 8px;
      color: #000;
      transition: all 0.2s ease;
  }
  .input-line-custom:focus {
      border-color: var(--gold-dark);
      box-shadow: 0 0 0 3px rgba(179, 135, 40, 0.1);
  }
  
  /* è‡ªè¨‚è¼¸å…¥æ¡†å®¹å™¨æ¨£å¼ */
  .custom-input-wrapper {
    display: none;
    width: 100%;
    align-items: center;
    gap: 5px;
  }

  .custom-input-wrapper input {
    flex-grow: 1;
    width: auto !important; 
    border-radius: 4px;
    padding: 4px 8px;
    font-size: 14px;
  }
  
  /* è¦†å¯«èˆŠçš„æŒ‰éˆ•æ¨£å¼ */
  .reset-btn {
    width: 24px;
    height: 24px;
    line-height: 1;
    font-size: 14px;
    flex-shrink: 0;
  }
  
  /* A4 ç´™å¼µçš„æ¨£å¼å®¹å™¨ - **å·²ä¿®æ­£å¯¬åº¦å•é¡Œ** */
  .a4-paper {
    max-width: 900px; /* é™åˆ¶æœ€å¤§å¯¬åº¦ï¼Œé¿å…è¶…å‡ºè¢å¹• */
    width: 100%; /* ç¢ºä¿åœ¨ max-width ç¯„åœå…§ç½®ä¸­å’Œç¸®æ”¾ */
    min-height: auto;
    background: var(--bg-page);
    padding: 20px; /* èª¿æ•´ç‚º px */
    box-shadow: 0 5px 15px rgba(0,0,0,0.15);
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    position: relative;
    margin: 0 auto 20px auto; /* ç½®ä¸­ */
  }

  /* éš±è— template.js æ¸²æŸ“çš„åŸºæœ¬è³‡è¨Šå€å¡Š */
  #unified-header-container .info-grid { 
      display: none !important; 
  }
  h3.section-title { display: none; } /* éš±è—åŸæœ¬çš„ PCB è¦æ ¼æ¨™é¡Œ */

  /* [è®Šæ›´ 3] å‚™è¨»æ¬„ä½ç¸®å°è‡³ 4 è¡Œ */
  .remarks-container {
      margin-bottom: 20px;
  }
  
  .remarks-input {
      min-height: 90px !important; /* èª¿æ•´è‡³ç´„ 4 è¡Œçš„é«˜åº¦ */
      resize: vertical;
  }

  /* [è®Šæ›´ 4] è¼¸å‡ºå€å¡Šæ¨£å¼èª¿æ•´ï¼Œå¢åŠ é•·åº¦ */
  .output-area {
    margin-top: 20px;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 6px;
    background-color: #fff;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  }

  /* [è®Šæ›´ 4] å¢åŠ è¼¸å‡ºæ–‡å­—æ¬„ä½é•·åº¦ */
  #output-text {
    /* ***ä»¥ä¸‹æ˜¯æ ¹æ“šæ‚¨çš„è¦æ±‚ä¿®æ”¹çš„éƒ¨åˆ†*** */
    width: 90%; /* (ä¿®æ”¹) æ¸›å°‘å¯¬åº¦ä»¥åœ¨å·¦å³ç”¢ç”Ÿé–“è· */
    min-height: 400px; /* å¢åŠ é«˜åº¦ä»¥å®¹ç´æ›´å¤šè³‡è¨Š */
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 14px;
    line-height: 1.6;
    resize: vertical;
    /* (æ–°å¢) æ°´å¹³ç½®ä¸­ï¼Œè®“å·¦å³é–“è·å›ºå®š */
    display: block;
    margin: 0 auto;
  }

  /* [è®Šæ›´ 5] è¼¸å‡ºæ¬„ä½æ¨™ç±¤æ¨£å¼ */
  .output-label {
      font-size: 14px;
      font-weight: 700;
      color: #333;
      margin-bottom: 5px;
      display: block;
  }

  /* æŒ‰éˆ•ä½ç½®èˆ‡é¡è‰²èª¿æ•´ */
  .btn-row {
      display: flex;
      justify-content: center; /* æŒ‰éˆ•ç½®ä¸­ */
      gap: 15px; /* èª¿æ•´é–“è·ä»¥å®¹ç´æ–°æŒ‰éˆ• */
      margin: 20px 0 20px 0; /* èª¿æ•´èˆ‡ä¸Šä¸‹å€å¡Šçš„é–“è· */
  }

  /* =============== Glassmorphism æŒ‰éˆ•æ¨£å¼é–‹å§‹ =============== */
  .btn-copy, .btn-generate, .btn-one-click {
      padding: 10px 25px;
      border: 1px solid rgba(255, 255, 255, 0.4); /* é€æ˜ç™½è‰²é‚Šæ¡† */
      border-radius: 999px; /* åœ“è§’è† å›ŠæŒ‰éˆ• */
      cursor: pointer;
      font-weight: 700;
      transition: all 0.2s;
      
      /* æ ¸å¿ƒç»ç’ƒæ•ˆæœ */
      background-color: rgba(255, 255, 255, 0.15); /* è¼•å¾®é€æ˜èƒŒæ™¯ */
      backdrop-filter: blur(5px); /* æ¨¡ç³ŠèƒŒæ™¯ï¼Œç”¢ç”Ÿç»ç’ƒæ„Ÿ */
      -webkit-backdrop-filter: blur(5px); /* å…¼å®¹æ€§è™•ç† */
      
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1), /* åº•éƒ¨é™°å½± */
                  inset 0 1px 1px rgba(255, 255, 255, 0.5); /* é ‚éƒ¨é«˜å…‰ */
      
      color: #212121; /* æŒ‰éˆ•æ–‡å­—é¡è‰² */
  }

  /* é‡å°ä¸åŒæŒ‰éˆ•çµ¦äºˆä¸åŒçš„èƒŒæ™¯è‰²èª¿ */
  .btn-generate {
      /* ç”Ÿæˆè¦æ ¼æ–‡å­—ï¼šè¼ƒäº®çš„è—è‰²èª¿ */
      background-color: rgba(0, 122, 255, 0.15);
      color: #004d99;
  }
  .btn-generate:hover {
      background-color: rgba(0, 122, 255, 0.25);
      transform: translateY(-2px);
  }
  
  .btn-one-click {
      /* ä¸€éµç”Ÿæˆä¸¦è¤‡è£½ï¼šé‡‘è‰²/é»ƒè‰²èª¿ */
      background-color: rgba(255, 199, 0, 0.15);
      color: #806600;
  }
  .btn-one-click:hover {
      background-color: rgba(255, 199, 0, 0.25);
      transform: translateY(-2px);
  }

  .btn-copy {
      /* è¤‡è£½è¦æ ¼æ–‡å­—ï¼šç°è‰²èª¿ */
      background-color: rgba(108, 117, 125, 0.15);
      color: #3e4449;
  }
  .btn-copy:hover {
      background-color: rgba(108, 117, 125, 0.25);
      transform: translateY(-2px);
  }
  /* =============== Glassmorphism æŒ‰éˆ•æ¨£å¼çµæŸ =============== */

  .btn-print { display: none; } 


  /* æ‰‹æ©ŸéŸ¿æ‡‰å¼èª¿æ•´ (Label ç½®ä¸­) */
  @media (max-width: 768px) {
      .a4-paper {
          width: 100%;
          min-height: auto;
          padding: 15px;
          box-shadow: none;
          margin: 0;
      }
      
    /* ***ä»¥ä¸‹æ˜¯æ ¹æ“šæ‚¨çš„è¦æ±‚ä¿®æ”¹çš„éƒ¨åˆ†*** */
    #output-text {
        width: 90% !important; /* (ä¿®æ”¹) èª¿æ•´æ‰‹æ©Ÿç‰ˆå¯¬åº¦ */
        margin: 0 auto !important; /* (æ–°å¢) ç¢ºä¿æ‰‹æ©Ÿç‰ˆä¹Ÿç½®ä¸­ */
    }

      /* ä¿®æ­£è­¦å‘Šè¨Šæ¯çš„æ°´å¹³å®šä½ï¼Œè®“å®ƒå°é½Šè¼¸å…¥æ¡† */
      .warning {
          margin-left: 93px !important; 
          margin-top: 5px; 
          padding-left: 35px !important; /* ç¢ºä¿èˆ‡è¼¸å…¥æ¡†å…§æ–‡å­—å°é½Š */
          margin-bottom: -5px;
      }
      
      .info-item-custom {
          /* **é—œéµä¿®æ”¹ï¼šç¢ºä¿æ°´å¹³æ’åˆ—çš„å„ªå…ˆç´šæœ€é«˜** */
          display: flex !important;
          flex-direction: row !important; 
          align-items: center !important;
          height: auto; /* å…è¨±å…§å®¹æ’é–‹é«˜åº¦ */
          padding-bottom: 5px;
          border-bottom: 1px solid #ddd;
      }

      .info-item-custom .label {
          /* ç¢ºä¿æ¨™ç±¤å¯¬åº¦å›ºå®šï¼Œä¸è¢«å£“ç¸®æˆ–æ›è¡Œ */
          width: 85px !important; 
          margin-right: 8px !important;
          margin-bottom: 0px !important;
          flex-shrink: 0 !important;
          text-align: center; 
      }
      
      .info-content-wrap {
          width: auto !important;
          flex-grow: 1 !important;
      }

      .btn-row {
          flex-direction: column;
          align-items: stretch;
      }
  }

</style>
</head>
<body>

<div id="navbar-container"></div>
<script src="navbar.js"></script>

<div class="page-container">
    <div class="a4-paper">
        
        <h2 class="explicit-page-title">
            <span class="brand">PCB è¦æ ¼ç”¢ç”Ÿå™¨</span>
        </h2>

        <div id="unified-header-container"></div>
        
        <section class="info-grid-custom">
            
            <div class="info-item-custom">
                <span class="label">æ–™è™Ÿ</span>
                <div class="info-content-wrap">
                    <input type="text" id="partNo" class="input-line-custom" placeholder="è«‹è¼¸å…¥æ–™è™Ÿ" />
                </div>
            </div>

            <div class="field-group-wrap">
                <div class="info-item-custom">
                    <span class="label">æ¿æ</span>
                    <div class="info-content-wrap">
                        <select id="material" class="input-line-custom" onchange="onSelectChange(this)">
                            <option>-</option>
                            <option selected>FR-4</option>
                            <option>FR-1</option>
                            <option>é‹åŸºæ¿</option>
                            <option value="custom">è‡ªè¡Œè¼¸å…¥</option>
                        </select>
                        <div id="material_custom_div" class="custom-input-wrapper">
                            <input type="text" id="material_custom" placeholder="è«‹è‡ªè¡Œè¼¸å…¥æ¿æ" class="input-line-custom" />
                            <button type="button" class="reset-btn" onclick="resetSelect('material')" title="åˆ‡æ›å›é¸å–®">Ã—</button>
                        </div>
                    </div>
                </div>
                <div id="materialWarning" class="warning" style="display:none;">
                    FR-1 äº¤æœŸè¼ƒé•·ï¼Œå»ºè­°ä»¥ FR-4 è£½ä½œ
                </div>
            </div>

            <div class="field-group-wrap">
                <div class="info-item-custom">
                    <span class="label">å±¤åˆ¥</span>
                    <div class="info-content-wrap">
                        <select id="layers" class="input-line-custom" onchange="onSelectChange(this)">
                            <option>-</option>
                            <option>å–®é¢æ¿</option>
                            <option selected>é›™é¢æ¿</option>
                            <option>å››å±¤æ¿</option>
                            <option>å…­å±¤æ¿</option>
                            <option>å…«å±¤æ¿</option>
                            <option>åå±¤æ¿</option>
                            <option value="custom">è‡ªè¡Œè¼¸å…¥</option>
                        </select>
                        <div id="layers_custom_div" class="custom-input-wrapper">
                            <input type="text" id="layers_custom" placeholder="è«‹è‡ªè¡Œè¼¸å…¥å±¤åˆ¥" class="input-line-custom" />
                            <button type="button" class="reset-btn" onclick="resetSelect('layers')" title="åˆ‡æ›å›é¸å–®">Ã—</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="field-group-wrap">
                <div class="info-item-custom">
                    <span class="label">æ¿åš</span>
                    <div class="info-content-wrap">
                        <select id="thickness" class="input-line-custom" onchange="onSelectChange(this)">
                            <option>-</option>
                            <option>0.4mm</option>
                            <option>0.6mm</option>
                            <option>0.8mm</option>
                            <option>1.0mm</option>
                            <option>1.2mm</option>
                            <option selected>1.6mm</option>
                            <option>2.0mm</option>
                            <option>2.4mm</option>
                            <option>3.0mm</option>
                            <option>3.2mm</option>
                            <option value="custom">è‡ªè¡Œè¼¸å…¥</option>
                        </select>
                        <div id="thickness_custom_div" class="custom-input-wrapper">
                            <input type="text" id="thickness_custom" placeholder="è«‹è‡ªè¡Œè¼¸å…¥æ¿åš" class="input-line-custom" />
                            <button type="button" class="reset-btn" onclick="resetSelect('thickness')" title="åˆ‡æ›å›é¸å–®">Ã—</button>
                        </div>
                    </div>
                </div>
                <div id="thicknessWarning" class="warning" style="display:none;">
                    æ¿åš 0.4mm å¤ªè–„ï¼Œç„¡æ³•é€²è¡Œ V-Cutã€‚è‹¥éœ€æ‹¼æ¿ï¼Œå»ºè­°æ¡ç”¨éƒµç¥¨å­”è¨­è¨ˆã€‚
                </div>
            </div>
            
            <div class="field-group-wrap">
                <div class="info-item-custom">
                    <span class="label">å…§å±¤éŠ…åš</span>
                    <div class="info-content-wrap">
                        <select id="innerCu" class="input-line-custom" onchange="checkCustom(this)">
                            <option>-</option>
                            <option>0.5oz</option>
                            <option>1oz</option>
                            <option>2oz</option>
                            <option value="custom">è‡ªè¡Œè¼¸å…¥</option>
                        </select>
                        <div id="innerCu_custom_div" class="custom-input-wrapper">
                            <input type="text" id="innerCu_custom" placeholder="è«‹è‡ªè¡Œè¼¸å…¥å…§å±¤éŠ…åš" class="input-line-custom" />
                            <button type="button" class="reset-btn" onclick="resetSelect('innerCu')" title="åˆ‡æ›å›é¸å–®">Ã—</button>
                        </div>
                    </div>
                </div>
                <div id="innerCuWarning" class="warning" style="display:none;">
                    å–®é¢æ¿ã€é›™é¢æ¿ä¸æ”¯æ´å…§å±¤éŠ…åš
                </div>
            </div>

            <div class="field-group-wrap">
                <div class="info-item-custom">
                    <span class="label">å¤–å±¤éŠ…åš</span>
                    <div class="info-content-wrap">
                        <select id="outerCu" class="input-line-custom" onchange="checkCustom(this)">
                            <option>-</option>
                            <option selected>1oz</option>
                            <option>2oz</option>
                            <option>3oz</option>
                            <option value="custom">è‡ªè¡Œè¼¸å…¥</option>
                        </select>
                        <div id="outerCu_custom_div" class="custom-input-wrapper">
                            <input type="text" id="outerCu_custom" placeholder="è«‹è‡ªè¡Œè¼¸å…¥å¤–å±¤éŠ…åš" class="input-line-custom" />
                            <button type="button" class="reset-btn" onclick="resetSelect('outerCu')" title="åˆ‡æ›å›é¸å–®">Ã—</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="field-group-wrap">
                <div class="info-item-custom">
                    <span class="label">é˜²ç„Šé¡è‰²</span>
                    <div class="info-content-wrap">
                        <select id="solderMask" class="input-line-custom" onchange="checkCustom(this)">
                            <option>-</option>
                            <option value="ç¶ è‰²" selected>ğŸŸ¢ ç¶ è‰²</option>
                            <option value="è—è‰²">ğŸ”µ è—è‰²</option>
                            <option value="é»‘è‰²">âš«  é»‘è‰²</option>
                            <option value="ç™½è‰²">âšª ç™½è‰²</option>
                            <option value="ç´…è‰²">ğŸ”´ ç´…è‰²</option>
                            <option value="é»ƒè‰²">ğŸŸ¡ é»ƒè‰²</option>
                            <option value="ç„¡"> ç„¡</option>
                            <option value="custom">è‡ªè¡Œè¼¸å…¥</option>
                        </select>
                        <div id="solderMask_custom_div" class="custom-input-wrapper">
                            <input type="text" id="solderMask_custom" placeholder="è«‹è‡ªè¡Œè¼¸å…¥é˜²ç„Šé¡è‰²" class="input-line-custom" />
                            <button type="button" class="reset-btn" onclick="resetSelect('solderMask')" title="åˆ‡æ›å›é¸å–®">Ã—</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="field-group-wrap">
                <div class="info-item-custom">
                    <span class="label">æ–‡å­—é¡è‰²</span>
                    <div class="info-content-wrap">
                        <select id="legendColor" class="input-line-custom" onchange="checkCustom(this)">
                            <option>-</option>
                            <option value="ç™½å­—" selected>âšª ç™½å­—</option>
                            <option value="é»‘å­—">âš« é»‘å­—</option>
                            <option value="ç„¡æ–‡å­—">ç„¡æ–‡å­—</option>
                            <option value="custom">è‡ªè¡Œè¼¸å…¥</option>
                        </select>
                        <div id="legendColor_custom_div" class="custom-input-wrapper">
                            <input type="text" id="legendColor_custom" placeholder="è«‹è‡ªè¡Œè¼¸å…¥æ–‡å­—é¡è‰²" class="input-line-custom" />
                            <button type="button" class="reset-btn" onclick="resetSelect('legendColor')" title="åˆ‡æ›å›é¸å–®">Ã—</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="field-group-wrap">
                <div class="info-item-custom">
                    <span class="label">è¡¨é¢è™•ç†</span>
                    <div class="info-content-wrap">
                        <select id="finish" class="input-line-custom" onchange="checkCustom(this)">
                            <option value="-">-</option>
                            <option value="æœ‰é‰›å™´éŒ«">æœ‰é‰›å™´éŒ«</option>
                            <option value="ç„¡é‰›å™´éŒ«" selected>ç„¡é‰›å™´éŒ«</option>
                            <option value="åŒ–é‡‘ 1u">åŒ–é‡‘ 1u"</option>
                            <option value="åŒ–é‡‘ 2u">åŒ–é‡‘ 2u"</option>
                            <option value="åŒ–é‡‘ 3u">åŒ–é‡‘ 3u"</option>
                            <option value="ç¡¬é‡‘ 3u">ç¡¬é‡‘ 3u"</option>
                            <option value="ç¡¬é‡‘ 5u">ç¡¬é‡‘ 5u"</option>
                            <option value="OSP">OSP</option>
                            <option value="è£¸éŠ…">è£¸éŠ…</option>
                            <option value="custom">è‡ªè¡Œè¼¸å…¥</option>
                        </select>
                        <div id="finish_custom_div" class="custom-input-wrapper">
                            <input type="text" id="finish_custom" placeholder="è«‹è‡ªè¡Œè¼¸å…¥è¡¨é¢è™•ç†" class="input-line-custom" />
                            <button type="button" class="reset-btn" onclick="resetSelect('finish')" title="åˆ‡æ›å›é¸å–®">Ã—</button>
                        </div>
                    </div>
                </div>
                <div id="finishWarning" class="warning" style="display:none;">
                    å…­å±¤æ¿ä»¥ä¸Šï¼Œçµ±ä¸€è£½åšåŒ–é‡‘ 2u è¡¨é¢è™•ç†
                </div>
            </div>

            <div class="field-group-wrap">
                <div class="info-item-custom">
                    <span class="label">é‡‘(éŒ«)æ‰‹æŒ‡</span>
                    <div class="info-content-wrap">
                        <select id="goldFinger" class="input-line-custom" onchange="checkCustom(this)">
                            <option>-</option>
                            <option>æ–œé‚Š30Â°</option>
                            <option>æ–œé‚Š45Â°</option>
                            <option value="custom">è‡ªè¡Œè¼¸å…¥</option>
                        </select>
                        <div id="goldFinger_custom_div" class="custom-input-wrapper">
                            <input type="text" id="goldFinger_custom" placeholder="è«‹è‡ªè¡Œè¼¸å…¥é‡‘(éŒ«)æ‰‹æŒ‡" class="input-line-custom" />
                            <button type="button" class="reset-btn" onclick="resetSelect('goldFinger')" title="åˆ‡æ›å›é¸å–®">Ã—</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="field-group-wrap">
                <div class="info-item-custom">
                    <span class="label">æ•¸é‡(å‡ºè²¨ç‰‡)</span>
                    <div class="info-content-wrap">
                        <select id="qty" class="input-line-custom" onchange="checkCustom(this)">
                            <option>-</option>
                            <option selected>5</option>
                            <option>10</option>
                            <option>15</option>
                            <option>20</option>
                            <option>25</option>
                            <option>30</option>
                            <option>50</option>
                            <option>75</option>
                            <option>100</option>
                            <option>125</option>
                            <option>150</option>
                            <option>200</option>
                            <option value="custom">è‡ªè¡Œè¼¸å…¥</option>
                        </select>
                        <div id="qty_custom_div" class="custom-input-wrapper">
                            <input type="text" id="qty_custom" placeholder="è«‹è‡ªè¡Œè¼¸å…¥æ•¸é‡" class="input-line-custom" oninput="formatNumber(this)" />
                            <button type="button" class="reset-btn" onclick="resetSelect('qty')" title="åˆ‡æ›å›é¸å–®">Ã—</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="field-group-wrap">
                <div class="info-item-custom">
                    <span class="label">ç‰¹æ®Šè£½ç¨‹#1</span>
                    <div class="info-content-wrap">
                        <select id="special1" class="input-line-custom" onchange="checkCustom(this)">
                            <option>-</option>
                            <option>åŠå­”</option>
                            <option>å¡å­”</option>
                            <option>æ¨¹è„‚å¡å­”</option>
                            <option>BGA</option>
                            <option>å´é‚ŠééŠ…</option>
                            <option value="custom">è‡ªè¡Œè¼¸å…¥</option>
                        </select>
                        <div id="special1_custom_div" class="custom-input-wrapper">
                            <input type="text" id="special1_custom" placeholder="è«‹è‡ªè¡Œè¼¸å…¥ç‰¹æ®Šè£½ç¨‹" class="input-line-custom" />
                            <button type="button" class="reset-btn" onclick="resetSelect('special1')" title="åˆ‡æ›å›é¸å–®">Ã—</button>
                        </div>
                    </div>
                </div>
                <div id="special1Warning" class="warning" style="display:none;">
                    å…­å±¤æ¿ä»¥ä¸Šï¼Œçµ±ä¸€è£½ä½œæ¨¹è„‚å¡å­”è£½ç¨‹
                </div>
            </div>
            
            <div class="field-group-wrap">
                <div class="info-item-custom">
                    <span class="label">ç‰¹æ®Šè£½ç¨‹#2</span>
                    <div class="info-content-wrap">
                        <select id="special2" class="input-line-custom" onchange="checkCustom(this)">
                            <option>-</option>
                            <option>åŠå­”</option>
                            <option>å¡å­”</option>
                            <option>æ¨¹è„‚å¡å­”</option>
                            <option>BGA</option>
                            <option>å´é‚ŠééŠ…</option>
                            <option value="custom">è‡ªè¡Œè¼¸å…¥</option>
                        </select>
                        <div id="special2_custom_div" class="custom-input-wrapper">
                            <input type="text" id="special2_custom" placeholder="è«‹è‡ªè¡Œè¼¸å…¥ç‰¹æ®Šè£½ç¨‹" class="input-line-custom" />
                            <button type="button" class="reset-btn" onclick="resetSelect('special2')" title="åˆ‡æ›å›é¸å–®">Ã—</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="field-group-wrap">
                <div class="info-item-custom">
                    <span class="label">ç‰¹æ®Šè£½ç¨‹#3</span>
                    <div class="info-content-wrap">
                        <select id="special3" class="input-line-custom" onchange="checkCustom(this)">
                            <option>-</option>
                            <option>åŠå­”</option>
                            <option>å¡å­”</option>
                            <option>æ¨¹è„‚å¡å­”</option>
                            <option>BGA</option>
                            <option>å´é‚ŠééŠ…</option>
                            <option value="custom">è‡ªè¡Œè¼¸å…¥</option>
                        </select>
                        <div id="special3_custom_div" class="custom-input-wrapper">
                            <input type="text" id="special3_custom" placeholder="è«‹è‡ªè¡Œè¼¸å…¥ç‰¹æ®Šè£½ç¨‹" class="input-line-custom" />
                            <button type="button" class="reset-btn" onclick="resetSelect('special3')" title="åˆ‡æ›å›é¸å–®">Ã—</button>
                        </div>
                    </div>
                </div>
            </div>
            
            </section>

        <div id="unified-remarks-container"></div>
        
        <div class="btn-row">
            <button type="button" class="btn-one-click" onclick="generateAndCopyText()">ä¸€éµç”Ÿæˆ+è¤‡è£½</button>
            <button type="button" class="btn-generate" onclick="generateText()">ç”Ÿæˆæ–‡å­—</button>
            <button type="button" class="btn-copy" onclick="copyText()">è¤‡è£½æ–‡å­—</button>
        </div>

        <div class="output-area">
            <span class="output-label">è¦æ ¼è¨Šæ¯</span>
            <textarea id="output-text" readonly placeholder="é»æ“Šã€Œç”Ÿæˆæ–‡å­—ã€æŒ‰éˆ•å¾Œï¼Œæœƒåœ¨æ­¤è™•é¡¯ç¤ºå®Œæ•´çš„ PCB è¦æ ¼è³‡è¨Š"></textarea>
        </div>

    </div>
</div>


<script src="template.js"></script>

<script>
  
  // æ ¼å¼åŒ–æ•¸å­— (æ•¸é‡/é‡‘é¡æ¬„ä½)
  function formatNumber(input) {
    var value = input.value.replace(/\D/g, "");
    if (value) {
      input.value = Number(value).toLocaleString("en-US");
    } else {
      input.value = "";
    }
  }

  // æª¢æŸ¥æ˜¯å¦é¸ä¸­è‡ªè¨‚è¼¸å…¥
  function checkCustom(selectEl) {
    if (selectEl.value === 'custom') {
      var customDivId = selectEl.id + '_custom_div';
      var customDiv = document.getElementById(customDivId);
      var customInput = document.getElementById(selectEl.id + '_custom');
      if (customDiv) {
        selectEl.style.display = 'none';
        customDiv.style.display = 'flex';
        if(customInput) customInput.focus();
      }
    }
  }

  // é‡ç½®å›é¸å–®
  function resetSelect(selectId) {
    var selectEl = document.getElementById(selectId);
    var customDiv = document.getElementById(selectId + '_custom_div');
    var customInput = document.getElementById(selectId + '_custom');
    if (selectEl && customDiv) {
      customDiv.style.display = 'none';
      customInput.value = ''; // æ¸…ç©ºè‡ªè¨‚å…§å®¹
      selectEl.style.display = 'block';
      selectEl.value = '-';
      if (selectEl.onchange) {
        onSelectChange(selectEl);
      } else {
         updateStates();
      }
    }
  }

  function onSelectChange(el) {
    checkCustom(el);
    updateStates();
  }
  
  // [æ–°å¢å‡½å¼] ä¸€éµç”Ÿæˆä¸¦è¤‡è£½
  function generateAndCopyText() {
    generateText(); // å…ˆç”Ÿæˆæ–‡å­—
    copyText();     // å†è¤‡è£½æ–‡å­—
  }

  // PCB è¦æ ¼é€£å‹•è¦å‰‡ (ä¿ç•™åŸé‚è¼¯ï¼Œå®Œå…¨ä¸è®Š)
  function updateStates() {
    var layer        = getValue("layers"); 
    var layersSel    = document.getElementById("layers");
    var innerSelect  = document.getElementById("innerCu");
    var innerWarn    = document.getElementById("innerCuWarning");
    var thicknessSel = document.getElementById("thickness");
    var thicknessWarn= document.getElementById("thicknessWarning");
    var outerCuSel   = document.getElementById("outerCu");
    var finishSelect = document.getElementById("finish");
    var finishWarn   = document.getElementById("finishWarning");
    var special1Sel  = document.getElementById("special1");
    var special1Warn = document.getElementById("special1Warning");
    var special2Sel  = document.getElementById("special2");
    var special3Sel  = document.getElementById("special3");
    var goldFingerSel= document.getElementById("goldFinger");
    var materialSel  = document.getElementById("material");
    var materialWarn = document.getElementById("materialWarning");
    var material     = getValue("material"); 

    var i, opt;

    if (thicknessWarn) {
      thicknessWarn.style.display = "none";
    }

    if (materialSel && materialWarn) {
      if (material === "FR-1") {
        materialWarn.style.display = "block";
      } else {
        materialWarn.style.display = "none";
      }
    }

    for (i = 0; i < thicknessSel.options.length; i++) { thicknessSel.options[i].disabled = false; }
    for (i = 0; i < outerCuSel.options.length; i++) { outerCuSel.options[i].disabled = false; }
    for (i = 0; i < layersSel.options.length; i++) { layersSel.options[i].disabled = false; }
    goldFingerSel.disabled = false;
    special1Sel.disabled = false;
    special2Sel.disabled = false;
    special3Sel.disabled = false;
    special1Warn.style.display = "none";
    finishSelect.disabled = false;
    finishWarn.style.display = "none";

    if (material === "FR-1") {
      for (i = 0; i < layersSel.options.length; i++) {
        opt = layersSel.options[i];
        if (opt.value !== "-" && opt.value !== "å–®é¢æ¿" && opt.value !== "custom") {
          opt.disabled = true;
        }
      }
      if (layer !== "å–®é¢æ¿" && layersSel.value !== "custom") {
        layersSel.value = "å–®é¢æ¿";
        layer = "å–®é¢æ¿";
      }

      for (i = 0; i < thicknessSel.options.length; i++) {
        opt = thicknessSel.options[i];
        opt.disabled = (opt.value !== "1.6mm" && opt.value !== "-" && opt.value !== "custom");
      }
      if (thicknessSel.value !== "1.6mm" && thicknessSel.value !== "custom") {
        thicknessSel.value = "1.6mm";
      }

      for (i = 0; i < outerCuSel.options.length; i++) {
        opt = outerCuSel.options[i];
        opt.disabled = (opt.value !== "1oz" && opt.value !== "-" && opt.value !== "custom");
      }
      if (outerCuSel.value !== "1oz" && outerCuSel.value !== "custom") {
        outerCuSel.value = "1oz";
      }

      goldFingerSel.value = "-";
      goldFingerSel.disabled = true;

      special1Sel.value = "-";
      special2Sel.value = "-";
      special3Sel.value = "-";
      special1Sel.disabled = true;
      special2Sel.disabled = true;
      special3Sel.disabled = true;

      innerSelect.disabled = true;
      innerSelect.value = "-";
      innerWarn.style.display = "block";

      if (thicknessWarn) thicknessWarn.style.display = "none";

      return;
    }

    if (layer === "å–®é¢æ¿" || layer === "é›™é¢æ¿") {
      innerSelect.disabled = true;
      innerSelect.value = "-";
      innerWarn.style.display = "block";
    } else if (
      layer === "å››å±¤æ¿" ||
      layer === "å…­å±¤æ¿" ||
      layer === "å…«å±¤æ¿" ||
      layer === "åå±¤æ¿"
    ) {
      innerSelect.disabled = false;
      innerWarn.style.display = "none";
      if ((getValue("innerCu") === "-" || getValue("innerCu") === "") && innerSelect.value !== "custom") {
        innerSelect.value = "0.5oz";
      }
    } else {
      innerSelect.disabled = false;
      innerWarn.style.display = "none";
    }

    if (
      layer === "å››å±¤æ¿" ||
      layer === "å…­å±¤æ¿" ||
      layer === "å…«å±¤æ¿" ||
      layer === "åå±¤æ¿"
    ) {
      for (i = 0; i < thicknessSel.options.length; i++) {
        opt = thicknessSel.options[i];
        if (opt.value === "0.4mm") opt.disabled = true;
      }
    }

    if (layer === "å…«å±¤æ¿" || layer === "åå±¤æ¿") {
      for (i = 0; i < thicknessSel.options.length; i++) {
        opt = thicknessSel.options[i];
        if (opt.value === "0.6mm") opt.disabled = true;
      }
    }
    
    var currentThicknessOpt = thicknessSel.options[thicknessSel.selectedIndex];
    if (currentThicknessOpt && currentThicknessOpt.disabled && thicknessSel.value !== "custom") {
      thicknessSel.value = "1.6mm"; 
    }

    var thickness = getValue("thickness");
    if (
      thicknessWarn &&
      thickness === "0.4mm" &&
      currentThicknessOpt &&
      !currentThicknessOpt.disabled
    ) {
      thicknessWarn.style.display = "block";
    } else if (thicknessWarn) {
      thicknessWarn.style.display = "none";
    }

    if (layer === "å…­å±¤æ¿" || layer === "å…«å±¤æ¿" || layer === "åå±¤æ¿") {
      if (finishSelect.value !== "custom") {
        finishSelect.value = "åŒ–é‡‘ 2u";
        finishSelect.disabled = true;
        finishWarn.style.display = "block";
      }
    }

    if (layer === "å…­å±¤æ¿" || layer === "å…«å±¤æ¿" || layer === "åå±¤æ¿") {
      if (special1Sel.value !== "custom") {
        special1Sel.value = "æ¨¹è„‚å¡å­”";
        special1Sel.disabled = true;
        special1Warn.style.display = "block";
      }
    }
  }

  function trim(str) {
    return str.replace(/^\s+|\s+$/g, "");
  }

  function getValue(id) {
    var el = document.getElementById(id);
    if (!el) return "";
    
    if (el.tagName === 'SELECT' && el.value === 'custom') {
      var customInput = document.getElementById(id + '_custom');
      if (customInput) {
        var val = trim(customInput.value);
        return val || ""; 
      }
    } 
    
    var v = trim(el.value);
    return v || "";
  }
  
  // ç”Ÿæˆè¦æ ¼æ–‡å­—
  function generateText() {
    var partNo = getValue("partNo");
    var material = getValue("material");
    var layers = getValue("layers");
    var thickness = getValue("thickness");
    var innerCu = getValue("innerCu");
    var outerCu = getValue("outerCu");
    var solderMask = getValue("solderMask");
    var legendColor = getValue("legendColor");
    var finish = getValue("finish");
    var goldFinger = getValue("goldFinger");
    var qty = getValue("qty");
    // ç§»é™¤ specialAmount 
    
    var specials = [];
    var specialsIds = ["special1", "special2", "special3"];
    for (var i = 0; i < specialsIds.length; i++) {
      var v = getValue(specialsIds[i]);
      if (v && v !== "-" && v !== "è«‹é¸æ“‡") specials.push(v);
    }
    
    var remarksEl = document.querySelector('.remarks-input');
    var remark = remarksEl ? trim(remarksEl.value) : "";
    
    var lines = [
      "æ–™è™Ÿï¼š" + (partNo || "-"),
      "æ¿æï¼š" + (material || "-"),
      "å±¤åˆ¥ï¼š" + (layers || "-"),
      "æ¿åšï¼š" + (thickness || "-")
    ];

    if (layers !== "å–®é¢æ¿" && layers !== "é›™é¢æ¿" && layers !== "" && layers !== "-") {
      lines.push("å…§å±¤éŠ…åšï¼š" + (innerCu || "-"));
    }

    lines.push(
      "å¤–å±¤éŠ…åšï¼š" + (outerCu || "-"),
      "é˜²ç„Šé¡è‰²ï¼š" + (solderMask || "-"),
      "æ–‡å­—é¡è‰²ï¼š" + (legendColor || "-"),
      "è¡¨é¢è™•ç†ï¼š" + (finish || "-")
    );

    if (goldFinger && goldFinger !== "-" && goldFinger !== "è«‹é¸æ“‡") {
      lines.push("é‡‘(éŒ«)æ‰‹æŒ‡ï¼š" + goldFinger);
    }

    lines.push("æ•¸é‡(å‡ºè²¨ç‰‡)ï¼š" + (qty || "-"));

    if (specials.length > 0) {
      lines.push("ç‰¹æ®Šè£½ç¨‹ï¼š" + specials.join("ã€"));
    }
    
    // ç§»é™¤è¨‚å–®é‡‘é¡è¼¸å‡º

    var msg = lines.join("\n");
    
    var now = new Date();
    var timeStr = now.getFullYear() + "/" + 
                  (now.getMonth() + 1).toString().padStart(2, '0') + "/" + 
                  now.getDate().toString().padStart(2, '0') + " " + 
                  now.getHours().toString().padStart(2, '0') + ":" + 
                  now.getMinutes().toString().padStart(2, '0');
    
    msg = timeStr + "\n" + msg;

    if (remark) {
      msg += "\n\nå‚™è¨»ï¼š" + remark;
    }
    
    document.getElementById("output-text").value = msg;
  }
  
  // [æ–°å¢å‡½å¼] ä¸€éµç”Ÿæˆè¤‡è£½
  function generateAndCopyText() {
    generateText(); // å…ˆç”Ÿæˆæ–‡å­—
    copyText();     // å†è¤‡è£½æ–‡å­—
  }


  // è¤‡è£½æ–‡å­—
  function copyText() {
    var output = document.getElementById("output-text");
    if (output.value) {
        output.select();
        output.setSelectionRange(0, 99999); 
        document.execCommand("copy");
        alert("æ–‡å­—è¨Šæ¯å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼");
    } else {
        // å¦‚æœè¼¸å‡ºæ¬„ä½æ˜¯ç©ºçš„ï¼Œå…ˆç”Ÿæˆä¸€æ¬¡
        generateText(); 
        if (output.value) {
            output.select();
            output.setSelectionRange(0, 99999); 
            document.execCommand("copy");
            alert("è¦æ ¼å·²ç”Ÿæˆä¸¦è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼");
        } else {
            alert("è«‹å…ˆå®Œæˆè¦æ ¼è¼¸å…¥ï¼");
        }
    }
  }


  document.addEventListener('DOMContentLoaded', updateStates);
  updateStates();
</script>

</body>
</html>
