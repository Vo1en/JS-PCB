<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é§¿é‘«å·¥å…·ç®¡ç†ç³»çµ±</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50 0L20 60H40L30 100L80 40H60L70 0Z' fill='%23c2a878'/></svg>">
    
    <style>
        /* --- å¼•å…¥å­—å‹ --- */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;500;700&family=Roboto:wght@300;400;700&display=swap');

        /* ç¹¼æ‰¿åŸæœ‰çš„é«˜ç´šé…è‰² (çœç•¥ :root å®šç¾©ï¼Œè«‹ä¿ç•™åŸæœ¬çš„ CSS) */
        :root {
            --bg-gradient: linear-gradient(135deg, #fcfaf5 0%, #f0ebde 100%);
            --glass-bg: rgba(255, 255, 255, 0.9);
            --glass-border: rgba(194, 168, 120, 0.5);
            --text-main: #1f2937;
            --text-sub: #6b7280;
            --gold-gradient: linear-gradient(135deg, #c2a878 0%, #e3d1a8 50%, #9e8b6b 100%);
            --gold-text-gradient: linear-gradient(to right, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
            --card-hover-shadow: rgba(194, 168, 120, 0.4);
        }

        body {
            font-family: 'Roboto', 'Noto Sans TC', "Microsoft JhengHei", Arial, sans-serif;
            margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; overflow-x: hidden; color: var(--text-main);
            background: var(--bg-gradient),
                repeating-linear-gradient(135deg, rgba(194, 168, 120, 0.3), rgba(194, 168, 120, 0.15) 4px, transparent 4px, transparent 500px), 
                repeating-linear-gradient(-45deg, rgba(150, 150, 150, 0.25), rgba(150, 150, 150, 0.12) 4px, transparent 4px, transparent 500px),
                radial-gradient(circle at 10% 80%, rgba(200, 190, 170, 0.3) 5%, transparent 60%), 
                radial-gradient(circle at 70% 20%, rgba(200, 190, 170, 0.3) 5%, transparent 60%), 
                var(--bg-gradient); 
            background-size: 100% 100%, 1500px 1500px, 1500px 1500px, 100% 100%, 100% 100%, 100% 100%;
            background-position: 0 0, 0 0, 0 0, 0 0, 0 0, 0 0; 
        }

        body::before { content: ''; position: absolute; top: -20%; left: -10%; width: 60vw; height: 60vw; background: radial-gradient(circle, rgba(194, 168, 120, 0.15) 0%, rgba(0,0,0,0) 70%); border-radius: 50%; pointer-events: none; }

        .container {
            position: relative; background-color: var(--glass-bg); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            padding: 60px 40px; border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15), inset 0 0 0 1px var(--glass-border);
            text-align: center; max-width: 900px; width: 90%;
            animation: fadeInUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
            display: flex; flex-direction: column; align-items: center;
        }

        h1 { color: var(--text-main); margin: 0 0 40px 0; line-height: 1.3; }
        h1 span.brand { display: block; font-size: 2.8rem; font-weight: 800; background: var(--gold-text-gradient); background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 8px; animation: shine 5s linear infinite; }
        h1 span.system { display: block; font-size: 1.2rem; color: #c2a878; font-weight: 400; letter-spacing: 6px; text-transform: uppercase; }
        h1::after { content: ''; display: block; width: 80px; height: 2px; background: linear-gradient(90deg, transparent, #c2a878, transparent); margin: 25px auto 0; opacity: 0.8; }

        .options-grid { display: flex; gap: 30px; justify-content: center; flex-wrap: wrap; margin-bottom: 50px; }
        .option-card { display: flex; flex-direction: column; align-items: center; justify-content: center; text-decoration: none; width: 260px; height: 200px; background: linear-gradient(145deg, #ffffff, #f0f4f8); border-radius: 15px; box-shadow: 5px 5px 15px rgba(0,0,0,0.1), -2px -2px 4px rgba(255,255,255,1); transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); position: relative; overflow: hidden; border: 2px solid #e2e8f0; cursor: pointer; }
        .option-icon { font-size: 55px; margin-bottom: 15px; transition: transform 0.4s ease; background: var(--gold-gradient); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1)); }
        .option-title { font-size: 1.3rem; font-weight: 500; color: var(--text-main); margin-bottom: 5px; transition: color 0.3s; letter-spacing: 1px; }
        .option-desc { font-size: 0.8rem; color: var(--text-sub); font-family: 'Roboto', sans-serif; font-weight: 300; letter-spacing: 1px; transition: color 0.3s; text-transform: uppercase; }

        /* Hover Effects */
        .option-card:hover { transform: translateY(-8px); border-color: #c2a878; box-shadow: 0 15px 35px var(--card-hover-shadow); }
        .option-card:hover .option-icon { transform: scale(1.1); -webkit-text-fill-color: #fff; }
        .option-card:hover .option-title, .option-card:hover .option-desc { color: #fff; }
        
        .card-order::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(161, 142, 114, 0.9), rgba(105, 90, 66, 0.9)); opacity: 0; transition: opacity 0.4s ease; z-index: 1; }
        .card-inspection::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(73, 113, 149, 0.9), rgba(52, 78, 100, 0.9)); opacity: 0; transition: opacity 0.4s ease; z-index: 1; }
        .card-test::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(60, 150, 110, 0.9), rgba(40, 100, 75, 0.9)); opacity: 0; transition: opacity 0.4s ease; z-index: 1; }
        .card-spec::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(0, 123, 194, 0.9), rgba(0, 76, 122, 0.9)); opacity: 0; transition: opacity 0.4s ease; z-index: 1; }
        .option-card:hover::before { opacity: 1; }
        .option-card > * { position: relative; z-index: 2; }

        /* === æ­·å²ç´€éŒ„å„€è¡¨æ¿æ¨£å¼ (æ–°) === */
        .history-section {
            width: 100%; max-width: 840px; margin-top: 10px;
            background: #fff; border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border: 1px solid rgba(194, 168, 120, 0.3);
            overflow: hidden;
            animation: fadeInUp 1s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .history-header {
            background: rgba(194, 168, 120, 0.1);
            padding: 12px 20px;
            border-bottom: 1px solid rgba(194, 168, 120, 0.3);
            display: flex; justify-content: space-between; align-items: center;
        }
        .history-title { font-size: 1rem; font-weight: 700; color: #555; display: flex; align-items: center; gap: 8px; }
        .history-title::before { content: 'ğŸ•’'; }
        
        .history-list { width: 100%; border-collapse: collapse; font-size: 14px; }
        .history-list th { text-align: left; padding: 10px 15px; color: #888; font-weight: 500; font-size: 13px; border-bottom: 1px solid #eee; }
        .history-list td { padding: 12px 15px; border-bottom: 1px solid #f5f5f5; color: #333; }
        .history-list tr:last-child td { border-bottom: none; }
        .history-list tr:hover { background-color: #fcfcfc; }
        
        .history-tag { padding: 3px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
        .tag-inspection { background: #e0f2fe; color: #0369a1; }
        .tag-test { background: #dcfce7; color: #15803d; }
        .tag-spec { background: #fef3c7; color: #92400e; }

        .btn-load {
            background: #fff; border: 1px solid #ddd; padding: 4px 12px; border-radius: 4px; 
            cursor: pointer; color: #555; font-size: 12px; transition: all 0.2s;
        }
        .btn-load:hover { border-color: #c2a878; color: #b38728; background: #fffdf5; }
        .empty-history { padding: 30px; color: #999; font-size: 14px; }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shine { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }

        @media (max-width: 600px) {
            .container { padding: 40px 20px; width: 85%; }
            h1 span.brand { font-size: 2.2rem; }
            .option-card { width: 100%; height: 140px; flex-direction: row; justify-content: flex-start; padding-left: 30px; background: #ffffff; }
            .option-icon { margin-bottom: 0; margin-right: 25px; font-size: 36px; }
            .option-info { text-align: left; }
            /* Mobile History Optimization */
            .history-list th:nth-child(2), .history-list td:nth-child(2) { display: none; } /* Hide Type on mobile */
            .history-list td { padding: 10px; }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>
            <span class="brand">é§¿é‘«</span>
            <span class="system">å·¥å…·ç®¡ç†ç³»çµ±</span>
        </h1>

        <div class="options-grid">
            <a href="spec-generator.html" class="option-card card-order">
                <div class="option-icon">ğŸ“</div>
                <div class="option-info">
                    <div class="option-title">è¦æ ¼ç”¢ç”Ÿå™¨</div>
                    <div class="option-desc">Spec Generator</div>
                </div>
            </a>
            
            <a href="inspection-report.html" class="option-card card-inspection">
                <div class="option-icon">ğŸ”¬</div>
                <div class="option-info">
                    <div class="option-title">å‡ºè²¨æª¢é©—å ±å‘Š</div>
                    <div class="option-desc">Inspection Report</div>
                </div>
            </a>

            <a href="test-report.html" class="option-card card-test">
                <div class="option-icon">ğŸ“‹</div>
                <div class="option-info">
                    <div class="option-title">é›»æ€§æ¸¬è©¦å ±å‘Š</div>
                    <div class="option-desc">Test Report</div>
                </div>
            </a>
            
            <a href="https://drive.google.com/file/d/1tW2bywohN62zzBRWE1Q0_976g6Yu2xkR/view?usp=sharing" class="option-card card-spec" target="_blank">
                <div class="option-icon">ğŸ“œ</div>
                <div class="option-info">
                    <div class="option-title">è£½ç¨‹èƒ½åŠ›èˆ‡äº¤æœŸè¦ç¯„</div>
                    <div class="option-desc">Process Capability</div>
                </div>
            </a>
        </div>

        <div class="history-section">
            <div class="history-header">
                <div class="history-title">æœ€è¿‘çš„ç´€éŒ„</div>
                <button onclick="localStorage.removeItem('js_pcb_history'); renderHistory();" style="border:none; bg:none; cursor:pointer; color:#999; font-size:12px;">æ¸…é™¤ç´€éŒ„</button>
            </div>
            <div id="history-content">
                </div>
        </div>
    </div>

    <script>
        function renderHistory() {
            const history = JSON.parse(localStorage.getItem('js_pcb_history') || '[]');
            const container = document.getElementById('history-content');
            
            if (history.length === 0) {
                container.innerHTML = '<div class="empty-history">å°šç„¡ç´€éŒ„ï¼Œè«‹å…ˆè‡³å„åŠŸèƒ½ç”Ÿæˆå ±è¡¨ã€‚</div>';
                return;
            }

            let html = '<table class="history-list"><thead><tr><th>æ™‚é–“</th><th>é¡å‹</th><th>å®¢æˆ¶</th><th>æ–™è™Ÿ</th><th>æ“ä½œ</th></tr></thead><tbody>';
            
            history.forEach(item => {
                let tagClass = 'tag-spec';
                let typeName = 'è¦æ ¼å–®';
                if (item.page.includes('inspection')) { tagClass = 'tag-inspection'; typeName = 'å‡ºè²¨æª¢é©—'; }
                if (item.page.includes('test')) { tagClass = 'tag-test'; typeName = 'é›»æ€§æ¸¬è©¦'; }
                
                // åªé¡¯ç¤ºæ—¥æœŸ MM/DD
                const dateShort = new Date(item.timestamp).toLocaleDateString('zh-TW', { month: '2-digit', day: '2-digit' });

                html += `
                    <tr>
                        <td>${dateShort}</td>
                        <td><span class="history-tag ${tagClass}">${typeName}</span></td>
                        <td>${item.client}</td>
                        <td>${item.partno}</td>
                        <td>
                            <button class="btn-load" onclick="loadRecord('${item.page}', '${item.id}')">è¼‰å…¥</button>
                        </td>
                    </tr>
                `;
            });
            html += '</tbody></table>';
            container.innerHTML = html;
        }

        function loadRecord(page, id) {
            window.location.href = `${page}?historyId=${id}`;
        }

        document.addEventListener('DOMContentLoaded', renderHistory);
    </script>
</body>
</html>